"use strict";require("dotenv").config();var express=require("express"),app=express(),port=3e3,cookieParser=require("cookie-parser"),mongoose=require("mongoose");mongoose.connect(process.env.MONGOHQ_URL,{useNewUrlParser:!0});var userRoutes=require("./routes/user.route"),adminRoutes=require("./routes/admin.route"),productRoutes=require("./routes/product.route"),authRoutes=require("./routes/auth.route"),apiProductRoute=require("./api/routes/product.route"),apiUserRoute=require("./api/routes/user.route"),apiAuthRoute=require("./api/routes/auth.route"),authMiddleware=require("./middlewares/auth.middleware");app.locals.moment=require("moment"),app.use(express.static("public")),app.use(express.json()),app.use(express.urlencoded({extended:!0})),app.use(cookieParser(process.env.SESSION_SECRET)),app.set("view engine","pug"),app.set("views","./views"),app.use("/users",authMiddleware.requireAuth,userRoutes),app.use("/admin",adminRoutes),app.use("/products",authMiddleware.requireAuth,productRoutes),app.use("/auth",authRoutes),app.use("/api/products",apiProductRoute),app.use("/api/users",apiUserRoute),app.use("/api/auth",apiAuthRoute),app.get("/",authMiddleware.requireAuth,function(e,r){return r.render("index",{name:"AAA"})}),app.get("/contact",function(e,r){return r.render("./contact/contact")}),app.listen(port,function(){return console.log("app listening at http://localhost:".concat(port))});